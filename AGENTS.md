## Codex 実行モード（前提）

* 本プロジェクトでは、Codex CLI は `--full-auto` 相当の権限で動作する前提とする。
* ワークスペース内のファイル編集・コマンド実行・再実行は、原則として自律的に行う。
* ユーザーへの確認・承認要求は、以下の場合のみに限定する：

  1. セキュリティ上の理由で実行可否判断が必要な場合
  2. 秘密情報（APIキー、トークン等）の入力が必要な場合
  3. OS外部・物理デバイス・外部アカウント操作が必要な場合

## 自動検証（最重要）

* 変更後は必ずローカルで検証コマンドを実行し、成功するまで
  「原因特定 → 修正 → 再実行」を自律的に繰り返す。
* ユーザーに手動検証を依頼するのは、上記の例外条件に該当する場合のみとする。

## 検証コマンドの自動決定ルール

* `make check` が存在する場合は、それを最優先で実行する。
* 存在しない場合は、Node.js プロジェクトとして以下を実行する：

  * `npm test` を最優先
  * 存在すれば `npm run lint`、`npm run typecheck` も実行
* 検証コマンドが存在しない場合は、最小限の検証ゲートを新規に作成し、それを完成条件とする。

## 失敗時の挙動

* エラーメッセージ全文を解析し、原因を1行で要約してから修正する。
* 同じ失敗を防ぐため、必要に応じてテストまたはチェックを追加する。
* 最終的に「実行したコマンド」と「すべて成功したこと」を簡潔に報告する。
